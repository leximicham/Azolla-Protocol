@startuml deadline_monitor_worker
' Deadline Monitor Worker â€” state machine derived from deadline_monitor_worker.md Flow.
' Control-plane logic; no claim/lease required.

hide empty description

state "objectives polled\n---\nobjectives with status != DONE\nread from Substrate" as ObjectivesPolled

state "urgency mapped\n---\nurgency-to-deadline mapping applied\ndeadline calculated per objective" as UrgencyMapped

state "deadline not exceeded\n---\nno action required" as DeadlineNotExceeded

state "deadline exceeded\n---\nobjective overdue" as DeadlineExceeded

state "pause_state written\n---\npause_state.reason = RUN_COMPLETE\nprioritized_actions = 1..3\n(local write only)" as PauseStateWritten

[*] --> ObjectivesPolled : poll objectives
ObjectivesPolled --> UrgencyMapped : apply urgency-to-deadline mapping
UrgencyMapped --> DeadlineNotExceeded : deadline not exceeded
UrgencyMapped --> DeadlineExceeded : deadline exceeded
DeadlineNotExceeded --> [*]
DeadlineExceeded --> PauseStateWritten : write local pause_state
PauseStateWritten --> [*]

@enduml
